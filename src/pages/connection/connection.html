<!--
  Generated template for the ConnectionPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <ion-title>Connection</ion-title>
    </ion-navbar>

</ion-header>

<ion-content>

    <ion-list>
        <ion-list-header>
            <button *ngIf="!isScanning" (click)="checkBluetooth()" item-end ion-button clear large>
                <ion-icon name="sync"></ion-icon>
            </button>
            <button *ngIf="isScanning" (click)="stopScan()" item-end ion-button clear large>
                <ion-icon name="remove-circle-outline"></ion-icon>
            </button>
        </ion-list-header>
        <ion-item *ngIf="isScanning" text-center>
            <ion-spinner name="dots"></ion-spinner>
        </ion-item>
        <ion-item>
            <ion-select *ngIf="!isScanning" style="max-width:100%" placeholder="Select a device to connect to"
                        (ionChange)="connectToDevice($event)">
                <h2>Nearby Devices</h2>
                <ion-option *ngFor="let device of bluetoothProvider.bluetoothDevices" value={{device.macAddress}}>{{device.name ?
                    device.name : device.macAddress}}
                </ion-option>
            </ion-select>
        </ion-item>

        <ion-item *ngFor="let device of bluetoothProvider.bluetoothDevices">
            {{device.macAddress}}
            <button ion-button color="success" (click)="connectToDevice(device)">Connect</button>

            <button ion-button color="success" (click)="disconnectFromDevice(device)">Disconnect</button>
        </ion-item>

    </ion-list>
</ion-content>
